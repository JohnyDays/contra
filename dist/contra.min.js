!function(){"use strict";function n(n){return n instanceof Array}function t(n){return Array.prototype.slice.call(n)}function e(n,t,e){n&&s(function(){n.apply(e||null,t||[])})}function i(n){function t(){e||(e=!0,n.apply(null,arguments))}var e;return t.discard=function(){e=!0},t}function u(n,t,i){var u=n.shift();return u?(i&&i.discard(),e(t,[u]),!0):void 0}function r(n,r){function o(){var f=i(r);return i(function(){var i=t(arguments),r=n.shift();if(r){if(u(i,f))return;i.push(o()),e(r,i)}else e(f,arguments)})}o()()}function o(r,o){function f(){return i(function(){var n=s.shift(),i=t(arguments),o=r[n];if(c){if(u(i,a))return;d[c]=i.shift()}c=n,o?e(o,[f()]):e(a,[null,d])})}var c,a=i(o),s=Object.keys(r),d=n(r)?[]:{};f()()}function f(r,o){function f(n){var r=i(function(){var i=t(arguments);u(i,c,r)||(s[n]=i.shift(),++d===l&&e(c,[null,s]))});return r}var c=i(o),a=Object.keys(r),s=n(r)?[]:{},d=0,l=a.length;a.forEach(function(n){e(r[n],[f(n)])})}function c(t,e){return function(i,u,r){var o=Object.keys(i),f=n(i)?[]:{};o.forEach(function(n){f[n]=function(t){u(i[n],t)}}),t(f,e?e(r):r)}}function a(n){var i=this,u={};n.on=function(n,t){u[n]?u[n].push(t):u[n]=[t]},n.emit=function(){var n=t(arguments),r=n.shift(),o=u[r];if("error"===r&&!o)throw 1===n.length?n[0]:n;o&&o.forEach(function(t){e(t,n,i)})}}var s;s="undefined"!=typeof process&&process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:"function"==typeof setImmediate?function(n){setImmediate(n)}:function(n){setTimeout(n,0)};var d=function(n,t){function u(n,t,i){var u=t?"unshift":"push",o=n instanceof Array?n:[n];o.forEach(function(n){f[u]({t:n,done:i})}),e(r)}function r(){if(!(c>=a)&&f.length){c++;var t=f.pop();n(t.t,i(o.bind(null,t)))}}function o(n,t){c--,e(n.done,[t]),e(r)}var f=[],c=0,a=t||1;return{push:function(n,t){u(n,!1,t)},unshift:function(n,t){u(n,!0,t)},get length(){return f.length}}},l={waterfall:r,series:o,concurrent:f,map:c(f),queue:d,emitter:a};l.map.series=c(o),"undefined"!=typeof module&&module.exports?module.exports=l:"undefined"!=typeof define&&define.amd?define([],function(){return l}):window.contra=l}();