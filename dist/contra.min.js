!function(n,t){"use strict";function r(t){return"[object Array]"===n.prototype.toString.call(t)}function e(n){return Array.prototype.slice.call(n)}function u(n,t,r){n&&m(function(){n.apply(r||null,t||[])})}function i(n){function t(){r||(r=!0,n.apply(null,arguments))}var r;return t.discard=function(){r=!0},t}function o(n,t,r){var e=n.shift();return e?(r&&r.discard(),u(t,[e]),!0):void 0}function f(){var n=e(arguments),t=n.shift();return function(){var r=e(arguments);t.apply(t,n.concat(r))}}function c(n,t){function r(){var f=i(t);return i(function(){var t=e(arguments),i=n.shift();if(i){if(o(t,f))return;t.push(r()),u(i,t)}else u(f,arguments)})}r()()}function a(t,f){function c(){return i(function(){var n=l.shift(),r=e(arguments),i=t[n];if(a){if(o(r,s))return;p[a]=r.shift()}a=n,i?u(i,[c()]):u(s,[null,p])})}var a,s=i(f),l=n.keys(t),p=r(t)?[]:{};c()()}function s(t,f){function c(n){var t=i(function(){var r=e(arguments);o(r,a,t)||(l[n]=r.shift(),++p===h&&u(a,[null,l]))});return t}var a=i(f),s=n.keys(t),l=r(t)?[]:{},p=0,h=s.length;s.forEach(function(n){u(t[n],[c(n)])})}function l(t,e){return function(u,i,o){var f=n.keys(u),c=r(u)?[]:{};f.forEach(function(n){c[n]=function(t){i(u[n],t)}}),t(c,e?e(u,o):o)}}function p(n){function t(n,t){return function(n){t(n)}}return l(n,t)}function h(t){function e(t,e){return function(u,i){function o(n,t){return!!i[t]}function f(){var r={};return n.keys(t).forEach(function(n){o(null,n)&&(r[n]=t[n])}),r}return u?void e(u):void e(null,r(i)?t.filter(o):f())}}return l(t,e)}function d(n){var t={};return n.on=function(n,r){t[n]?t[n].push(r):t[n]=[r]},n.once=function(t,r){r._once=!0,n.on(t,r)},n.off=function(n,r){var e=t[n];e&&e.splice(e.indexOf(r),1)},n.emit=function(){var n=e(arguments),r=n.shift(),i=t[r],o=[];if("error"===r&&!i)throw 1===n.length?n[0]:n;i&&(i.forEach(function(t){u(t,n),t._once||o.push(t)}),t[r]=o)},n}function v(t,e){function o(n){var t=n?"unshift":"push";return function(n,e){var i=r(n)?n:[n];i.forEach(function(n){s[t]({t:n,done:e})}),u(f)}}function f(){if(!(a||l>=p)){if(!s.length)return void h.emit("drain");l++;var n=s.pop();t(n.t,i(c.bind(null,n)))}}function c(n,t){l--,u(n.done,[t]),u(f)}var a,s=[],l=0,p=e||1,h=d({push:o(!1),unshift:o(!0),pause:function(){a=!0},resume:function(){a=!1,u(f)},pending:s});return n.defineProperty&&!n.definePropertyPartial&&n.defineProperty(h,"length",{get:function(){return s.length}}),h}var m,y="function"==typeof setImmediate;m="undefined"!=typeof process&&process.nextTick?y?setImmediate:process.nextTick:y?function(n){setImmediate(n)}:function(n){setTimeout(n,0)};var g={curry:f,concurrent:s,series:a,waterfall:c,each:p(s),map:l(s),filter:h(s),queue:v,emitter:d};g.each.series=p(a),g.map.series=l(a),g.filter.series=h(a),"undefined"!=typeof module&&module.exports?module.exports=g:t.contra=g}(Object,this);