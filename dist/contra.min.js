// contra@v1.5.5, MIT licensed. https://github.com/bevacqua/contra
!function(n,t,r){"use strict";function e(){}function u(t){return"[object Array]"===n.prototype.toString.call(t)}function i(n,t){return Array.prototype.slice.call(n,t)}function o(n,t,r){n&&y(function(){n.apply(r||null,t||[])})}function f(n){function t(){r||(r=!0,(n||e).apply(null,arguments))}var r;return t.discard=function(){r=!0},t}function c(n,t,r){var e=n.shift();return e?(r&&r.discard(),o(t,[e]),!0):void 0}function a(){var n=i(arguments),t=n.shift();return function(){var r=i(arguments);t.apply(t,n.concat(r))}}function s(n,t){function r(){var t=i(arguments),u=n.shift();if(u){if(c(t,e))return;t.push(f(r)),o(u,t)}else o(e,arguments)}var e=f(t);r()}function l(n,t,r){function e(t,r){function e(){var n=i(arguments);c(n,a)||(p[t]=n.shift(),r())}o(n[t],[e])}r||(r=t,t=P);var a=f(r),s=g(e,t),l=k(n),p=u(n)?[]:{};s.unshift(l),s.on("drain",function(){a(null,p)})}function p(n,t){l(n,x,t)}function d(n,t,r){var e=function(r,e,i,o){2===arguments.length&&(i=e,e=P),3===arguments.length&&"number"!=typeof e&&(o=i,i=e,e=P);var f=k(r),c=u(r)?[]:{};f.forEach(function(n){c[n]=function(t){3===i.length?i(r[n],n,t):i(r[n],t)}}),l(c,n||e,t?t(r,o):o)};return r||(e.series=d(x,t,!0)),e}function h(n){function t(n,t){return function(n){t(n)}}return d(n,t)}function m(n){function t(n,t){return function(r,e){function i(n,t){return!!e[t]}function o(){var t={};return k(n).forEach(function(r){i(null,r)&&(t[r]=n[r])}),t}return r?void t(r):void t(null,u(e)?n.filter(i):o())}}return d(n,t)}function v(n){var t={};return n===r&&(n={}),n.on=function(n,r){t[n]?t[n].push(r):t[n]=[r]},n.once=function(t,r){r._once=!0,n.on(t,r)},n.off=function(n,r){var e=t[n];e&&e.splice(e.indexOf(r),1)},n.emit=function(){var n=i(arguments),r=n.shift(),e=t[r];if("error"===r&&!e)throw 1===n.length?n[0]:n;e&&(t[r]=e.filter(function(t){return o(t,n),!t._once}))},n}function g(t,r){function e(n,t,r){var e=u(t)?t:[t];e.forEach(function(t){l[n]({t:t,done:r})}),o(c)}function c(){if(!(s||p>=d)){if(!l.length)return void(0===p&&h.emit("drain"));p++;var n=l.pop();t(n.t,f(a.bind(null,n))),o(c)}}function a(n){p--,o(n.done,i(arguments,1)),o(c)}var s,l=[],p=0,d=r||1,h=v({push:e.bind(null,"push"),unshift:e.bind(null,"unshift"),pause:function(){s=!0},resume:function(){s=!1,o(c)},pending:l});return n.defineProperty&&!n.definePropertyPartial&&n.defineProperty(h,"length",{get:function(){return l.length}}),h}var y,b="undefined",x=1,P=1/0,k=n.keys,E="function"==typeof setImmediate;y=E?setImmediate:typeof process!==b&&process.nextTick?process.nextTick:setTimeout;var T={curry:a,concurrent:l,series:p,waterfall:s,each:h(),map:d(),filter:m(),queue:g,emitter:v};typeof module!==b&&module.exports?module.exports=T:t.contra=T}(Object,this);