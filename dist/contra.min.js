!function(n){"use strict";function t(t){return"[object Array]"===n.prototype.toString.call(t)}function r(n){return"function"==typeof n}function u(n){return Array.prototype.slice.call(n)}function e(n,t,r){n&&m(function(){n.apply(r||null,t||[])})}function i(n){function t(){r||(r=!0,n.apply(null,arguments))}var r;return t.discard=function(){r=!0},t}function o(n,t,r){var u=n.shift();return u?(r&&r.discard(),e(t,[u]),!0):void 0}function f(){var n=u(arguments),t=n.shift();return function(r){var e=u(n);e.push(r),t.apply(t,e)}}function c(n,t){function r(){var f=i(t);return i(function(){var t=u(arguments),i=n.shift();if(i){if(o(t,f))return;t.push(r()),e(i,t)}else e(f,arguments)})}r()()}function a(r,f){function c(){return i(function(){var n=p.shift(),t=u(arguments),i=r[n];if(a){if(o(t,s))return;l[a]=t.shift()}a=n,i?e(i,[c()]):e(s,[null,l])})}var a,s=i(f),p=n.keys(r),l=t(r)?[]:{};c()()}function s(r,f){function c(n){var t=i(function(){var r=u(arguments);o(r,a,t)||(p[n]=r.shift(),++l===h&&e(a,[null,p]))});return t}var a=i(f),s=n.keys(r),p=t(r)?[]:{},l=0,h=s.length;s.forEach(function(n){e(r[n],[c(n)])})}function p(r,u){return function(e,i,o){var f=n.keys(e),c=t(e)?[]:{};f.forEach(function(n){c[n]=function(t){i(e[n],t)}}),r(c,u?u(o):o)}}function l(n){function t(n){return function(t){n(t)}}return p(n,t)}function h(n){var t=this,r={};return n.on=function(n,t){r[n]?r[n].push(t):r[n]=[t]},n.emit=function(){var n=u(arguments),i=n.shift(),o=r[i];if("error"===i&&!o)throw 1===n.length?n[0]:n;o&&o.forEach(function(r){e(r,n,t)})},n}var m,d=r(setImmediate);m="undefined"!=typeof process&&process.nextTick?d?setImmediate:process.nextTick:d?function(n){setImmediate(n)}:function(n){setTimeout(n,0)};var v=function(r,u){function o(n,r,u){var i=r?"unshift":"push",o=t(n)?n:[n];o.forEach(function(n){s[i]({t:n,done:u})}),e(f)}function f(){if(!(a||p>=l)&&s.length){p++;var n=s.pop();r(n.t,i(c.bind(null,n)))}}function c(n,t){p--,e(n.done,[t]),e(f)}var a,s=[],p=0,l=u||1,h={push:function(n,t){o(n,!1,t)},unshift:function(n,t){o(n,!0,t)},pause:function(){a=!0},resume:function(){a=!1,f()}};return n.defineProperty(h,"length",{get:function(){return s.length}}),h},y={apply:f,concurrent:s,series:a,waterfall:c,each:l(s),map:p(s),queue:v,emitter:h};y.each.series=l(a),y.map.series=p(a),"undefined"!=typeof module&&module.exports?module.exports=y:window.contra=y}(Object);