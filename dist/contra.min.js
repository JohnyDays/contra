// contra@v1.6.7, MIT licensed. https://github.com/bevacqua/contra
!function(n,t,e){"use strict";function r(){}function u(t){return"[object Array]"===n.prototype.toString.call(t)}function i(n,t){return Array.prototype.slice.call(n,t)}function o(n,t,e){n&&y(function(){n.apply(e||null,t||[])})}function f(n){function t(){e||(e=!0,(n||r).apply(null,arguments))}var e;return t.discard=function(){e=!0},t}function c(n,t,e){var r=n.shift();return r?(e&&e.discard(),o(t,[r]),!0):void 0}function a(){var n=i(arguments),t=n.shift();return function(){var e=i(arguments);t.apply(t,n.concat(e))}}function s(n,t){function e(){var t=i(arguments),u=n.shift();if(u){if(c(t,r))return;t.push(f(e)),o(u,t)}else o(r,arguments)}var r=f(t);e()}function l(t,e,r){function a(n,e){function r(){var t=i(arguments);c(t,s)||(h[n]=t.shift(),e())}o(t[n],[r])}r||(r=e,e=x);var s=f(r),l=g(a,e),p=n.keys(t),h=u(t)?[]:{};l.unshift(p),l.on("drain",function(){s(null,h)})}function p(n,t){l(n,k,t)}function h(t,e,r){var i=function(r,i,o,f){var c=arguments;2===c.length&&(o=i,i=x),3===c.length&&"number"!=typeof i&&(f=o,o=i,i=x);var a=n.keys(r),s=u(r)?[]:{};a.forEach(function(n){s[n]=function(t){3===o.length?o(r[n],n,t):o(r[n],t)}}),l(s,t||i,e?e(r,f):f)};return r||(i.series=h(k,e,!0)),i}function d(n){function t(n,t){return function(n){t(n)}}return h(n,t)}function v(t){function e(t,e){return function(r,i){function o(n,t){return!!i[t]}function f(){var e={};return n.keys(t).forEach(function(n){o(null,n)&&(e[n]=t[n])}),e}return r?void e(r):void e(null,u(i)?t.filter(o):f())}}return h(t,e)}function m(n,t){var r=t||{},u={};return n===e&&(n={}),n.on=function(n,t){u[n]?u[n].push(t):u[n]=[t]},n.once=function(t,e){e._once=!0,n.on(t,e)},n.off=function(n,t){var e=arguments.length;if(1===e)delete u[n];else if(0===e)u={};else{var r=u[n];if(!r)return;r.splice(r.indexOf(t),1)}},n.emit=function(){var t=i(arguments),e=t.shift(),f=u[e];if("error"===e&&r.throws!==!1&&!f)throw 1===t.length?t[0]:t;f&&(u[e]=f.filter(function(e){return r.async?o(e,t,n):e.apply(n,t),!e._once}))},n}function g(t,e){function r(n,t,e){var r=u(t)?t:[t];r.forEach(function(t){l[n]({t:t,done:e})}),o(c)}function c(){if(!(s||p>=h)){if(!l.length)return void(0===p&&d.emit("drain"));p++;var n=l.pop();t(n.t,f(a.bind(null,n))),o(c)}}function a(n){p--,o(n.done,i(arguments,1)),o(c)}var s,l=[],p=0,h=e||1,d=m({push:r.bind(null,"push"),unshift:r.bind(null,"unshift"),pause:function(){s=!0},resume:function(){s=!1,o(c)},pending:l});return n.defineProperty&&!n.definePropertyPartial&&n.defineProperty(d,"length",{get:function(){return l.length}}),d}var y,b=""+e,k=1,x=1/0,P="function"==typeof setImmediate;y=P?function(n){setImmediate(n)}:typeof process!==b&&process.nextTick?process.nextTick:function(n){setTimeout(n,0)};var w={curry:a,concurrent:l,series:p,waterfall:s,each:d(),map:h(),filter:v(),queue:g,emitter:m};typeof module!==b&&module.exports?module.exports=w:t.contra=w}(Object,this);