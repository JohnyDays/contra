// contra@v1.4.3, MIT licensed. https://github.com/bevacqua/contra
!function(n,t){"use strict";function e(t){return"[object Array]"===n.prototype.toString.call(t)}function r(n,t){return Array.prototype.slice.call(n,t)}function u(n,t,e){n&&v(function(){n.apply(e||null,t||[])})}function i(n){function t(){e||(e=!0,n.apply(null,arguments))}var e;return t.discard=function(){e=!0},t}function o(n,t,e){var r=n.shift();return r?(e&&e.discard(),u(t,[r]),!0):void 0}function f(){var n=r(arguments),t=n.shift();return function(){var e=r(arguments);t.apply(t,n.concat(e))}}function c(n,t){function e(){var f=i(t);return i(function(){var t=r(arguments),i=n.shift();if(i){if(o(t,f))return;t.push(e()),u(i,t)}else u(f,arguments)})}e()()}function a(t,f,c){function a(n,e){function i(){var t=r(arguments);o(t,s)||(m[n]=t.shift(),e())}u(t[n],[i])}c||(c=f,f=k);var s=i(c),l=h(a,f),p=n.keys(t),m=e(t)?[]:{};l.unshift(p),l.on("drain",function(){s(null,m)})}function s(n,t){a(n,y,t)}function l(t,r){return function(u,i,o,f){2===arguments.length&&(o=i,i=k),3===arguments.length&&"number"!=typeof i&&(f=o,o=i,i=k);var c=n.keys(u),s=e(u)?[]:{};c.forEach(function(n){s[n]=function(t){o(u[n],t)}}),a(s,t||i,r?r(u,f):f)}}function p(n){function t(n,t){return function(n){t(n)}}return l(n,t)}function m(t){function r(t,r){return function(u,i){function o(n,t){return!!i[t]}function f(){var e={};return n.keys(t).forEach(function(n){o(null,n)&&(e[n]=t[n])}),e}return u?void r(u):void r(null,e(i)?t.filter(o):f())}}return l(t,r)}function d(n){var t={};return n.on=function(n,e){t[n]?t[n].push(e):t[n]=[e]},n.once=function(t,e){e._once=!0,n.on(t,e)},n.off=function(n,e){var r=t[n];r&&r.splice(r.indexOf(e),1)},n.emit=function(){var n=r(arguments),e=n.shift(),i=t[e];if("error"===e&&!i)throw 1===n.length?n[0]:n;i&&(t[e]=i.filter(function(t){return u(t,n),!t._once}))},n}function h(t,o){function f(n){var t=n?"unshift":"push";return function(n,r){var i=e(n)?n:[n];i.forEach(function(n){l[t]({t:n,done:r})}),u(c)}}function c(){if(!(s||m!==k&&p>=m)){if(!l.length)return void(0===p&&h.emit("drain"));p++;var n=l.pop();t(n.t,i(a.bind(null,n))),u(c)}}function a(n){p--,u(n.done,r(arguments,1)),u(c)}var s,l=[],p=0,m=o||1,h=d({push:f(!1),unshift:f(!0),pause:function(){s=!0},resume:function(){s=!1,u(c)},pending:l});return n.defineProperty&&!n.definePropertyPartial&&n.defineProperty(h,"length",{get:function(){return l.length}}),h}var v,g="undefined",y=1,k=1/0,x="function"==typeof setImmediate;v=typeof process!==g&&process.nextTick?x?setImmediate:process.nextTick:x?function(n){setImmediate(n)}:function(n){setTimeout(n,0)};var b={curry:f,concurrent:a,series:s,waterfall:c,each:p(),map:l(),filter:m(),queue:h,emitter:d};b.each.series=p(y),b.map.series=l(y),b.filter.series=m(y),typeof module!==g&&module.exports?module.exports=b:t.contra=b}(Object,this);