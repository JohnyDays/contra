// contra@v1.5.2, MIT licensed. https://github.com/bevacqua/contra
!function(n,t,e){"use strict";function r(t){return"[object Array]"===n.prototype.toString.call(t)}function u(n,t){return Array.prototype.slice.call(n,t)}function i(n,t,e){n&&g(function(){n.apply(e||null,t||[])})}function o(n){function t(){e||(e=!0,n.apply(null,arguments))}var e;return t.discard=function(){e=!0},t}function f(n,t,e){var r=n.shift();return r?(e&&e.discard(),i(t,[r]),!0):void 0}function c(){var n=u(arguments),t=n.shift();return function(){var e=u(arguments);t.apply(t,n.concat(e))}}function a(n,t){function e(){var r=o(t);return o(function(){var t=u(arguments),o=n.shift();if(o){if(f(t,r))return;t.push(e()),i(o,t)}else i(r,arguments)})}e()()}function s(t,e,c){function a(n,e){function r(){var t=u(arguments);f(t,s)||(m[n]=t.shift(),e())}i(t[n],[r])}c||(c=e,e=x);var s=o(c),l=v(a,e),p=n.keys(t),m=r(t)?[]:{};l.unshift(p),l.on("drain",function(){s(null,m)})}function l(n,t){s(n,k,t)}function p(t,e){return function(u,i,o,f){2===arguments.length&&(o=i,i=x),3===arguments.length&&"number"!=typeof i&&(f=o,o=i,i=x);var c=n.keys(u),a=r(u)?[]:{};c.forEach(function(n){a[n]=function(t){o(u[n],t)}}),s(a,t||i,e?e(u,f):f)}}function m(n){function t(n,t){return function(n){t(n)}}return p(n,t)}function d(t){function e(t,e){return function(u,i){function o(n,t){return!!i[t]}function f(){var e={};return n.keys(t).forEach(function(n){o(null,n)&&(e[n]=t[n])}),e}return u?void e(u):void e(null,r(i)?t.filter(o):f())}}return p(t,e)}function h(n){var t={};return n===e&&(n={}),n.on=function(n,e){t[n]?t[n].push(e):t[n]=[e]},n.once=function(t,e){e._once=!0,n.on(t,e)},n.off=function(n,e){var r=t[n];r&&r.splice(r.indexOf(e),1)},n.emit=function(){var n=u(arguments),e=n.shift(),r=t[e];if("error"===e&&!r)throw 1===n.length?n[0]:n;r&&(t[e]=r.filter(function(t){return i(t,n),!t._once}))},n}function v(t,e){function f(n){var t=n?"unshift":"push";return function(n,e){var u=r(n)?n:[n];u.forEach(function(n){l[t]({t:n,done:e})}),i(c)}}function c(){if(!(s||m!==x&&p>=m)){if(!l.length)return void(0===p&&d.emit("drain"));p++;var n=l.pop();t(n.t,o(a.bind(null,n))),i(c)}}function a(n){p--,i(n.done,u(arguments,1)),i(c)}var s,l=[],p=0,m=e||1,d=h({push:f(!1),unshift:f(!0),pause:function(){s=!0},resume:function(){s=!1,i(c)},pending:l});return n.defineProperty&&!n.definePropertyPartial&&n.defineProperty(d,"length",{get:function(){return l.length}}),d}var g,y="undefined",k=1,x=1/0,b="function"==typeof setImmediate;g=typeof process!==y&&process.nextTick?b?setImmediate:process.nextTick:b?function(n){setImmediate(n)}:function(n){setTimeout(n,0)};var P={curry:c,concurrent:s,series:l,waterfall:a,each:m(),map:p(),filter:d(),queue:v,emitter:h};P.each.series=m(k),P.map.series=p(k),P.filter.series=d(k),typeof module!==y&&module.exports?module.exports=P:t.contra=P}(Object,this);